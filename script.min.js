async function getUserCountry(){const e="https://ipinfo.io?token=23e5f53cc2b967";try{const t=await fetch(e);if(!t.ok)throw new Error("Network response was not ok");const n=await t.json();return console.log(n),n}catch(e){return console.error("Error fetching IP-based location:",e),alert("Could not determine location."),null}}async function salah(){let e=localStorage.getItem("city"),t=localStorage.getItem("countryName");if(!e||!t){const n=await getUserCountry();if(!n)return void alert("Unable to determine location. Please try again later.");e=n.city,t=n.country,localStorage.setItem("city",e),localStorage.setItem("countryName",t)}var n=(new Date).getFullYear(),a=(new Date).getMonth()+1,o=Math.max(0,(new Date).getDate()-1);fetch("https://api.aladhan.com/v1/calendarByCity/"+n+"/"+a+"?city="+e+"&country="+t+"&method=3").then(e=>e.json()).then(t=>{var n=t,a=t.data[o].timings.Fajr,r=t.data[o].timings.Dhuhr,c=t.data[o].timings.Asr,i=t.data[o].timings.Maghrib,s=t.data[o].timings.Isha,l=t.data[o].meta.method.name,d=t.data[o].date.hijri.date,m=t.data[o].date.gregorian.date;console.log(n);var h=document.getElementById("fajr");h.innerHTML=a.replace("(+01)","");var u=document.getElementById("dhuhr");u.innerHTML=r.replace("(+01)","");var g=document.getElementById("asr");g.innerHTML=c.replace("(+01)","");var y=document.getElementById("maghrib");y.innerHTML=i.replace("(+01)","");var L=document.getElementById("isha");L.innerHTML=s.replace("(+01)",""),document.querySelector(".hhh").innerHTML=e,document.querySelector(".method").innerHTML="<i>method :  </i>"+l,document.querySelector(".date").innerHTML="Miladi :"+m+" | hijri :"+d}).catch(e=>{console.error("Error fetching salah timings:",e),alert("Failed to fetch salah timings.")})}let result=document.querySelector("pre");document.addEventListener("DOMContentLoaded",()=>{salah()});const sunicon=document.querySelector(".sun"),moonicon=document.querySelector(".moon"),userTheme=localStorage.getItem("theme"),systemTheme=window.matchMedia("(prefers-color-scheme: dark)").matches,icontoggle=()=>{moonicon.classList.toggle("display-none"),sunicon.classList.toggle("display-none")},themecheck=()=>{if("dark"===userTheme||!userTheme&&systemTheme)return document.documentElement.classList.add("dark"),void moonicon.classList.add("display-none");sunicon.classList.add("display-none")},themeswitch=()=>{if(document.documentElement.classList.contains("dark"))return document.documentElement.classList.remove("dark"),localStorage.setItem("theme","light"),void icontoggle();document.documentElement.classList.add("dark"),localStorage.setItem("theme","dark"),icontoggle()};sunicon.addEventListener("click",themeswitch),moonicon.addEventListener("click",themeswitch),themecheck();